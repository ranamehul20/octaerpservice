import{r as t,n as k,w as D,j as s,C as T}from"./index-BOQoDeiJ.js";import{X as B,M as o,B as h}from"./Modal-BRV6LQxd.js";import{C as E,a as L}from"./CRow-DZKMKKzZ.js";import{C as F}from"./CAlert-Bm5RWCiZ.js";import{b as M,a as r}from"./index.esm-BDIoaTPO.js";import{C as A,a as V}from"./CCardBody-Dm0V9Iwv.js";import{C as _}from"./CCardHeader-C3St3R9K.js";import{C as P}from"./CFormInput-kvLYk_aa.js";import"./cil-user-CBnTYt-8.js";const Q=()=>{const[n,x]=t.useState([]),[i,c]=t.useState(!0),[d,u]=t.useState(null),[f,a]=t.useState(!1),[R,C]=t.useState(null),[m,j]=t.useState(""),l=k();t.useEffect(()=>{p()},[]);const p=async()=>{try{const e=await D.get("http://localhost:3001/api/houses",{withCredentials:!0});e.data.code===200&&!e.data.error?x(e.data.results):u("Failed to fetch house. Please try again later."),c(!1)}catch{u("Failed to fetch house. Please try again later."),c(!1)}};if(i)return s.jsx(E,{className:"justify-content-center",children:s.jsx(L,{xs:"auto",children:s.jsx(T,{color:"primary"})})});if(d)return s.jsx(F,{color:"danger",children:d});const y=async e=>{a(!1)},g=e=>{C(e),a(!0)},b=e=>{l(`/house/details/${e}`)},v=e=>{l(`/house/edit/${e}`)},H=()=>{console.log("Create"),l("/house/create")},N=n.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())),w=[{name:"#",cell:(e,S)=>S+1,sortable:!1},{name:"society",selector:e=>e.society,sortable:!0},{name:"Block",selector:e=>e.block,sortable:!0},{name:"Name",selector:e=>e.name,sortable:!0},{name:"Type",selector:e=>e.type,sortable:!0},{name:"Action",selector:null,sortable:!1,cell:e=>s.jsxs("div",{children:[s.jsx(r,{color:"info",onClick:()=>b(e._id),className:"mt-2 me-2 mb-2",children:"View"}),s.jsx(r,{color:"warning",className:"mt-2 me-2 mb-2",onClick:()=>v(e._id),children:"Edit"}),s.jsx(r,{color:"danger",className:"mb-2",onClick:()=>g(e._id),children:"Delete"})]})}];return s.jsxs(M,{children:[s.jsxs(A,{className:"mb-4",children:[s.jsx(_,{children:"House List"}),s.jsxs(V,{children:[s.jsx("div",{className:"d-flex justify-content-end mb-3",children:s.jsx(r,{color:"primary",onClick:H,className:"mb-3",children:"Create House"})}),s.jsx("div",{className:"d-flex justify-content-end mb-3",children:s.jsx(P,{className:"mb-3",type:"text",placeholder:"Search by house name...",value:m,onChange:e=>j(e.target.value),style:{width:"300px",marginTop:"10px"}})}),i?s.jsx("div",{children:"Loading..."}):n.length===0?s.jsx("div",{className:"text-center",children:"No records found"}):s.jsx(B,{columns:w,data:N,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0})]})]}),s.jsxs(o,{show:f,onHide:()=>a(!1),centered:!0,children:[s.jsx(o.Header,{onClose:()=>a(!1),children:s.jsx(o.Title,{children:"Delete House"})}),s.jsx(o.Body,{children:"Are you sure you want to delete this House?"}),s.jsxs(o.Footer,{children:[s.jsx(h,{variant:"secondary",onClick:()=>a(!1),children:"Close"}),s.jsx(h,{variant:"danger",onClick:()=>y(),children:"Delete"})]})]})]})};export{Q as default};
