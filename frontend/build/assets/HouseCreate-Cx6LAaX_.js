import{r,j as e}from"./index-BDq0fJeC.js";import{g as q,a as A,c as E}from"./HouseService-D6iGv9fz.js";import{C as a,a as o}from"./CRow-BptM8iaF.js";import{C as M,a as H}from"./CCardBody-DX8udb6o.js";import{C as T}from"./CCardHeader-CErCK7DV.js";import{C as D}from"./CForm-aEcGfKVU.js";import{a as c,C as i}from"./CFormInput-vW0qYZpN.js";import{C as p}from"./CFormSelect-CfWV5T9u.js";import{b as R}from"./MemberDetailsView-BIJ5TZkK.js";import{C as b}from"./CAlert-B2xPzP-d.js";import"./cil-user-CgMK_sKB.js";const W=()=>{const[l,m]=r.useState({name:"",type:"",totalMembers:0,totalChildren:0,totalAdults:0,blockId:"",societyId:""}),[u,x]=r.useState(null),[f,j]=r.useState(!1),[C,y]=r.useState([]),[d,S]=r.useState(""),[g,N]=r.useState([]),[w,k]=r.useState(""),[v,h]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const t=await q();t.code===200&&!t.error?y(t.results):console.error("Error fetching societies:",t.error)}catch(t){console.error("Error fetching societies:",t)}})()},[]),r.useEffect(()=>{(async()=>{if(d)try{const t=await A(d);t.code===200&&!t.error?N(t.results):console.error("Error fetching blocks:",t.error)}catch(t){console.error("Error fetching blocks:",t)}})()},[d]);const n=s=>{m({...l,[s.target.name]:s.target.value})},B=s=>{S(s.target.value),m({...l,[s.target.name]:s.target.value})},I=s=>{k(s.target.value),m({...l,[s.target.name]:s.target.value})},F=async s=>{s.preventDefault(),h(!0),x(null),j(!1);try{await E(l),j(!0),m({name:"",type:"",totalMembers:0,totalChildren:0,totalAdults:0,blockId:"",societyId:""}),h(!1)}catch(t){x(t.response.data.errors),h(!1)}};return e.jsx(a,{children:e.jsx(o,{xs:12,children:e.jsxs(M,{className:"mb-4",children:[e.jsx(T,{children:e.jsx("strong",{children:"Create House"})}),e.jsxs(H,{children:[e.jsxs(D,{onSubmit:F,children:[e.jsxs(a,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"societyId",className:"col-sm-2 col-form-label",children:["Society ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(o,{sm:10,children:e.jsxs(p,{id:"societyId",name:"societyId",value:l.societyId,onChange:B,children:[e.jsx("option",{value:"",children:"Select Society"}),C.map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})})]}),e.jsxs(a,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"blockId",className:"col-sm-2 col-form-label",children:["Block ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(o,{sm:10,children:e.jsxs(p,{id:"blockId",name:"blockId",value:l.blockId,onChange:I,disabled:!d,children:[e.jsx("option",{value:"",children:"Select Block"}),g.map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})})]}),e.jsxs(a,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"name",className:"col-sm-2 col-form-label",children:["House Number ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(o,{sm:10,children:e.jsx(i,{type:"text",id:"name",name:"name",placeholder:"House Number",value:l.name,onChange:n,required:!0})})]}),e.jsxs(a,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"totalMembers",className:"col-sm-2 col-form-label",children:["Type ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(o,{sm:10,children:e.jsx(i,{type:"text",id:"type",name:"type",value:l.type,placeholder:"House Type like 2BHK, 3BHK",onChange:n,required:!0})})]}),e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"totalMembers",className:"col-sm-2 col-form-label",children:"Total Members"}),e.jsx(o,{sm:10,children:e.jsx(i,{type:"text",id:"totalMembers",name:"totalMembers",value:l.totalMembers,placeholder:"Total Members",onChange:n})})]}),e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"totalChildren",className:"col-sm-2 col-form-label",children:"Total Children"}),e.jsx(o,{sm:10,children:e.jsx(i,{type:"text",id:"totalChildren",name:"totalChildren",value:l.totalChildren,placeholder:"Total Children",onChange:n})})]}),e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"totalAdults",className:"col-sm-2 col-form-label",children:"Total Adults"}),e.jsx(o,{sm:10,children:e.jsx(i,{type:"text",id:"totalAdults",name:"totalAdults",value:l.totalAdults,placeholder:"Total Adults",onChange:n})})]}),e.jsx(R,{type:"submit",color:"primary",disabled:v,children:"Submit"})]}),u&&e.jsx(b,{color:"danger",className:"mt-3",children:u}),f&&e.jsx(b,{color:"success",className:"mt-3",children:"Block created successfully!"})]})]})})})};export{W as default};
