import{r as t,n as T,j as s,C as k}from"./index-BOQoDeiJ.js";import{X as L,M as r,B as u}from"./Modal-BRV6LQxd.js";import{l as B}from"./SocietyService-CGeiqU4x.js";import{C as H,a as M}from"./CRow-DZKMKKzZ.js";import{C as A}from"./CAlert-Bm5RWCiZ.js";import{b as R,a}from"./index.esm-BDIoaTPO.js";import{C as V,a as _}from"./CCardBody-Dm0V9Iwv.js";import{C as $}from"./CCardHeader-C3St3R9K.js";import{C as F}from"./CFormInput-kvLYk_aa.js";import"./cil-user-CBnTYt-8.js";const U=()=>{const[n,x]=t.useState([]),[i,c]=t.useState(!0),[d,m]=t.useState(null),[f,o]=t.useState(!1),[C,j]=t.useState(null),[h,y]=t.useState(""),l=T();t.useEffect(()=>{p()},[]);const p=async()=>{try{const e=await B();console.log("societies",e),e.code===200&&!e.error?x(e.results):m(e.message),c(!1)}catch(e){m(e),c(!1)}};if(i)return s.jsx(H,{className:"justify-content-center",children:s.jsx(M,{xs:"auto",children:s.jsx(k,{color:"primary"})})});if(d)return s.jsx(A,{color:"danger",children:d});const g=async e=>{console.log(`Delete ${e}`),o(!1)},b=e=>{j(e),o(!0)},S=e=>{l(`/society/details/${e}`)},v=e=>{l(`/society/edit/${e}`)},N=()=>{console.log("Create"),l("/society/create")},w=n.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())),D=[{name:"#",cell:(e,E)=>E+1,sortable:!1},{name:"Name",selector:e=>e.name,sortable:!0},{name:"Type",selector:e=>e.type,sortable:!0},{name:"Established",selector:e=>e.established,sortable:!0},{name:"Action",selector:null,sortable:!1,cell:e=>s.jsxs("div",{children:[s.jsx(a,{color:"info",onClick:()=>S(e._id),className:"mt-2 me-2 mb-2",children:"View"}),s.jsx(a,{color:"warning",className:"mt-2 me-2 mb-2",onClick:()=>v(e._id),children:"Edit"}),s.jsx(a,{color:"danger",className:"mb-2",onClick:()=>b(e._id),children:"Delete"})]})}];return s.jsxs(R,{children:[s.jsxs(V,{className:"mb-4",children:[s.jsx($,{children:"Society List"}),s.jsxs(_,{children:[s.jsx("div",{className:"d-flex justify-content-end mb-3",children:s.jsx(a,{color:"primary",onClick:N,className:"mb-3",children:"Create Society"})}),s.jsx("div",{className:"d-flex justify-content-end mb-3",children:s.jsx(F,{className:"mb-3",type:"text",placeholder:"Search by society name...",value:h,onChange:e=>y(e.target.value),style:{width:"300px",marginTop:"10px"}})}),i?s.jsx("div",{children:"Loading..."}):n.length===0?s.jsx("div",{className:"text-center",children:"No records found"}):s.jsx(L,{columns:D,data:w,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0})]})]}),s.jsxs(r,{show:f,onHide:()=>o(!1),centered:!0,children:[s.jsx(r.Header,{onClose:()=>o(!1),children:s.jsx(r.Title,{children:"Delete Society"})}),s.jsx(r.Body,{children:"Are you sure you want to delete this society?"}),s.jsxs(r.Footer,{children:[s.jsx(u,{variant:"secondary",onClick:()=>o(!1),children:"Close"}),s.jsx(u,{variant:"danger",onClick:()=>g(C),children:"Delete"})]})]})]})};export{U as default};
