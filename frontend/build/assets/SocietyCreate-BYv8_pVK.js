import{r as a,j as e}from"./index-BDq0fJeC.js";import{g as B,a as P,b as U,c as Z}from"./SocietyService-isI-FQWX.js";import{C as o,a as l}from"./CRow-BptM8iaF.js";import{C as H,a as O}from"./CCardBody-DX8udb6o.js";import{C as G}from"./CCardHeader-CErCK7DV.js";import{C as J}from"./CForm-aEcGfKVU.js";import{a as c,C as i}from"./CFormInput-vW0qYZpN.js";import{C as x}from"./CFormSelect-CfWV5T9u.js";import{C as K}from"./CImage-BW_azUiP.js";import{b as M}from"./MemberDetailsView-BIJ5TZkK.js";import{C as N}from"./CAlert-B2xPzP-d.js";import"./cil-user-CgMK_sKB.js";const oe=()=>{const[r,m]=a.useState({name:"",street:"",locality:"",city:"",state:"",country:"",zipCode:"",establishment:"",type:"",logo:null,registrationNumber:""}),[p,j]=a.useState(null),[S,y]=a.useState(!1),[C,g]=a.useState(null),[v,F]=a.useState([]),[E,f]=a.useState([]),[q,b]=a.useState([]),[d,L]=a.useState(""),[h,w]=a.useState(""),[Q,k]=a.useState(""),[D,u]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const t=await B();t.code===200&&!t.error?F(t.results):console.error("Error fetching countries:",t.message)}catch(t){console.error("Error fetching countries:",t)}})()},[]),a.useEffect(()=>{(async()=>{if(d)try{const t=await P(d);t.code===200&&!t.error?f(t.results):console.error("Error fetching states:",t.message)}catch(t){console.error("Error fetching states:",t)}else f([])})()},[d]),a.useEffect(()=>{(async()=>{if(h)try{const t=await U(h);t.code===200&&!t.error?b(t.results):console.error("Error fetching city:",t.message)}catch(t){console.error("Error fetching city:",t)}else b([])})()},[h]);const n=s=>{m({...r,[s.target.name]:s.target.value})},R=s=>{L(s.target.value),m({...r,[s.target.name]:s.target.value})},z=s=>{w(s.target.value),m({...r,[s.target.name]:s.target.value})},A=s=>{k(s.target.value),m({...r,[s.target.name]:s.target.value})},I=s=>{const t=s.target.files[0];m({...r,logo:t}),g(URL.createObjectURL(t))},T=async s=>{s.preventDefault(),u(!0),j(null),y(!1);try{const t=await Z(r);t.code===200&&!t.error?(y(!0),m({name:"",street:"",locality:"",city:"",state:"",country:"",zipCode:"",establishment:"",type:"",logo:null,registrationNumber:""}),g(null),u(!1)):(console.log("error",t),j(t.errors),u(!1))}catch(t){console.log("error",t.response.data.errors),j(t.response.data.errors),u(!1)}};return e.jsx(o,{children:e.jsx(l,{xs:12,children:e.jsxs(H,{className:"mb-4",children:[e.jsx(G,{children:e.jsx("strong",{children:"Create Society"})}),e.jsxs(O,{children:[e.jsxs(J,{onSubmit:T,children:[e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"name",className:"col-sm-2 col-form-label",children:["Society Name ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsx(i,{type:"text",id:"name",name:"name",placeholder:"Society Name",value:r.fname,onChange:n,required:!0})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"street",className:"col-sm-2 col-form-label",children:["Address Line 1 ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsx(i,{type:"text",id:"street",name:"street",value:r.street,placeholder:"Address Line 1",onChange:n,required:!0})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"locality",className:"col-sm-2 col-form-label",children:["Locality ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsx(i,{type:"text",id:"locality",name:"locality",value:r.locality,placeholder:"Locality",onChange:n,required:!0})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"country",className:"col-sm-2 col-form-label",children:["Country ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsxs(x,{id:"country",name:"country",value:r.country,onChange:R,children:[e.jsx("option",{value:"",children:"Select Country"}),v.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"state",className:"col-sm-2 col-form-label",children:["State ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsxs(x,{id:"state",name:"state",value:r.state,onChange:z,disabled:!d,children:[e.jsx("option",{value:"",children:"Select State"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"city",className:"col-sm-2 col-form-label",children:["City ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsxs(x,{id:"city",name:"city",value:r.city,onChange:A,disabled:!h,children:[e.jsx("option",{value:"",children:"Select City"}),q.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"zipCode",className:"col-sm-2 col-form-label",children:["Zip code ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsx(i,{type:"tel",id:"zipCode",name:"zipCode",placeholder:"Zip Code",value:r.zipCode,onChange:n,required:!0})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(c,{htmlFor:"establishment",className:"col-sm-2 col-form-label",children:"Establishment Date"}),e.jsx(l,{sm:10,children:e.jsx(i,{type:"Date",id:"establishment",name:"establishment",placeholder:"Establishment Date",value:r.establishment,onChange:n})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsxs(c,{htmlFor:"type",className:"col-sm-2 col-form-label",children:["Society Type ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(l,{sm:10,children:e.jsxs(x,{id:"type",name:"type",value:r.type,onChange:n,children:[e.jsx("option",{value:"",children:"Select Society Type"}),e.jsx("option",{value:"1",children:"Tenament"},"1"),e.jsx("option",{value:"2",children:"Flat"},"2")]})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(c,{htmlFor:"registrationNumber",className:"col-sm-2 col-form-label",children:"Registration Number"}),e.jsx(l,{sm:10,children:e.jsx(i,{type:"text",id:"registrationNumber",name:"registrationNumber",placeholder:"Registration Number",value:r.registrationNumber,onChange:n})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(c,{htmlFor:"logo",className:"col-sm-2 col-form-label",children:"Logo"}),e.jsx(l,{sm:10,children:e.jsx(i,{type:"file",id:"logo",name:"logo",onChange:I,accept:"image/*"})})]}),C&&e.jsxs(o,{className:"mb-3",children:[e.jsx(l,{sm:2}),e.jsx(l,{sm:10,children:e.jsx(K,{src:C,alt:"Logo Preview",width:200,className:"mb-2"})})]}),e.jsx(M,{type:"submit",color:"primary",disabled:D,children:"Submit"})]}),p&&e.jsx(N,{color:"danger",className:"mt-3",children:p}),S&&e.jsx(N,{color:"success",className:"mt-3",children:"Society created successfully!"})]})]})})})};export{oe as default};
