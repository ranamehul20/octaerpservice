import{r as s,u as k,j as r,C as D}from"./index-DnRDX3w2.js";import{X as T}from"./DefaultLayout-5rBFB6PH.js";import{l as E}from"./MemberService-6s-AHVmR.js";import{C as B,a as L}from"./CRow-1tTMpDHO.js";import{C as A}from"./CAlert-F9qhzg3x.js";import{C as F,b as o}from"./index.esm-DBaUAKo-.js";import{C as H,a as P}from"./CCardBody-DCdMFWZv.js";import{C as R}from"./CCardHeader-D4DRa4G8.js";import{C as V}from"./CFormInput-DldqsSPp.js";import{M as a,B as h}from"./Modal-DzXcSjhT.js";import"./CCloseButton-DW2grjsO.js";import"./MemberDetailsView-CTXHKFj-.js";const Y=()=>{const[n,f]=s.useState([]),[i,c]=s.useState(!0),[m,d]=s.useState(null),[x,t]=s.useState(!1),[_,C]=s.useState(null),[u,b]=s.useState(""),l=k(),j=async()=>{try{const e=await E();e.code===200&&!e.error?f(Array.isArray(e.results)?e.results:[]):d("Failed to fetch members. Please try again later."),c(!1)}catch{d("Failed to fetch members. Please try again later."),c(!1)}};if(s.useEffect(()=>{j()},[]),i)return r.jsx(B,{className:"justify-content-center",children:r.jsx(L,{xs:"auto",children:r.jsx(D,{color:"primary"})})});if(m)return r.jsx(A,{color:"danger",children:m});const p=async e=>{t(!1)},y=e=>{C(e),t(!0)},g=e=>{l(`/members/details/${e}`)},N=e=>{l(`/members/edit/${e}`)},v=()=>{console.log("Create"),l("/members/create")},M=n.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),w=[{name:"#",cell:(e,S)=>S+1,sortable:!1},{name:"Name",selector:e=>e.name,sortable:!0},{name:"Email",selector:e=>e.email,sortable:!0},{name:"Phone Number",selector:e=>e.phone,sortable:!0},{name:"Block",selector:e=>e.blockNumber},{name:"Society",selector:e=>e.societyId},{name:"Type",selector:e=>e.userType,sortable:!0},{name:"Action",selector:null,sortable:!1,cell:e=>r.jsxs("div",{children:[r.jsx(o,{color:"info",onClick:()=>g(e._id),className:"mt-2 me-2 mb-2",children:"View"}),r.jsx(o,{color:"warning",className:"mt-2 me-2 mb-2",onClick:()=>N(e._id),children:"Edit"}),r.jsx(o,{color:"danger",className:"mb-2",onClick:()=>y(e._id),children:"Delete"})]})}];return r.jsxs(F,{children:[r.jsxs(H,{className:"mb-4",children:[r.jsx(R,{children:"Member List"}),r.jsxs(P,{children:[r.jsx("div",{className:"d-flex justify-content-end mb-3",children:r.jsx(o,{color:"primary",onClick:v,className:"mb-3",children:"Create Member"})}),r.jsx("div",{className:"d-flex justify-content-end mb-3",children:r.jsx(V,{className:"mb-3",type:"text",placeholder:"Search by first name...",value:u,onChange:e=>b(e.target.value),style:{width:"300px",marginTop:"10px"}})}),i?r.jsx("div",{children:"Loading..."}):n.length===0?r.jsx("div",{className:"text-center",children:"No records found"}):r.jsx(T,{columns:w,data:M,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0})]})]}),r.jsxs(a,{show:x,onHide:()=>t(!1),centered:!0,children:[r.jsx(a.Header,{onClose:()=>t(!1),children:r.jsx(a.Title,{children:"Delete Member"})}),r.jsx(a.Body,{children:"Are you sure you want to delete this Member?"}),r.jsxs(a.Footer,{children:[r.jsx(h,{variant:"secondary",onClick:()=>t(!1),children:"Close"}),r.jsx(h,{variant:"danger",onClick:()=>p(),children:"Delete"})]})]})]})};export{Y as default};
