import{r as t,u as S,j as e,C as D}from"./index-DnRDX3w2.js";import{X as E}from"./DefaultLayout-5rBFB6PH.js";import{l as L}from"./BlockService-D_VSwCyK.js";import{C as T,a as F}from"./CRow-1tTMpDHO.js";import{C as H}from"./CAlert-F9qhzg3x.js";import{C as M,b as a}from"./index.esm-DBaUAKo-.js";import{C as A,a as R}from"./CCardBody-DCdMFWZv.js";import{C as V}from"./CCardHeader-D4DRa4G8.js";import{C as _}from"./CFormInput-DldqsSPp.js";import{M as r,B as u}from"./Modal-DzXcSjhT.js";import"./CCloseButton-DW2grjsO.js";import"./MemberDetailsView-CTXHKFj-.js";const Y=()=>{const[n,f]=t.useState([]),[c,i]=t.useState(!0),[d,m]=t.useState(null),[x,o]=t.useState(!1),[P,C]=t.useState(null),[h,j]=t.useState(""),l=S();t.useEffect(()=>{p()},[]);const p=async()=>{try{const s=await L();s.code===200&&!s.error?f(s.results):m("Failed to fetch societies. Please try again later."),i(!1)}catch{m("Failed to fetch societies. Please try again later."),i(!1)}};if(c)return e.jsx(T,{className:"justify-content-center",children:e.jsx(F,{xs:"auto",children:e.jsx(D,{color:"primary"})})});if(d)return e.jsx(H,{color:"danger",children:d});const b=async s=>{o(!1)},k=s=>{C(s),o(!0)},y=s=>{l(`/block/details/${s}`)},g=s=>{l(`/block/edit/${s}`)},v=()=>{console.log("Create"),l("/block/create")},B=n.filter(s=>s.name.toLowerCase().includes(h.toLowerCase())),N=[{name:"#",cell:(s,w)=>w+1,sortable:!1},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Society",selector:s=>s.society,sortable:!0},{name:"Action",selector:null,sortable:!1,cell:s=>e.jsxs("div",{children:[e.jsx(a,{color:"info",onClick:()=>y(s._id),className:"mt-2 me-2 mb-2",children:"View"}),e.jsx(a,{color:"warning",className:"mt-2 me-2 mb-2",onClick:()=>g(s._id),children:"Edit"}),e.jsx(a,{color:"danger",className:"mb-2",onClick:()=>k(s._id),children:"Delete"})]})}];return e.jsxs(M,{children:[e.jsxs(A,{className:"mb-4",children:[e.jsx(V,{children:"Block List"}),e.jsxs(R,{children:[e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsx(a,{color:"primary",onClick:v,className:"mb-3",children:"Create Block"})}),e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsx(_,{className:"mb-3",type:"text",placeholder:"Search by block name...",value:h,onChange:s=>j(s.target.value),style:{width:"300px",marginTop:"10px"}})}),c?e.jsx("div",{children:"Loading..."}):n.length===0?e.jsx("div",{className:"text-center",children:"No records found"}):e.jsx(E,{columns:N,data:B,pagination:!0,highlightOnHover:!0,striped:!0,responsive:!0})]})]}),e.jsxs(r,{show:x,onHide:()=>o(!1),centered:!0,children:[e.jsx(r.Header,{onClose:()=>o(!1),children:e.jsx(r.Title,{children:"Delete Block"})}),e.jsx(r.Body,{children:"Are you sure you want to delete this block?"}),e.jsxs(r.Footer,{children:[e.jsx(u,{variant:"secondary",onClick:()=>o(!1),children:"Close"}),e.jsx(u,{variant:"danger",onClick:()=>b(),children:"Delete"})]})]})]})};export{Y as default};
