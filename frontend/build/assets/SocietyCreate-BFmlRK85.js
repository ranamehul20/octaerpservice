import{r as c,j as e}from"./index-DnRDX3w2.js";import{g as H,a as O,b as Q,c as $}from"./SocietyService-DYrJTKhh.js";import{C as l,a as r}from"./CRow-1tTMpDHO.js";import{C as G}from"./CForm-DUZMZWxx.js";import{C as S,a as v}from"./CCardBody-DCdMFWZv.js";import{C as F}from"./CCardHeader-D4DRa4G8.js";import{a as n,C as o}from"./CFormInput-DldqsSPp.js";import{C as d}from"./CFormSelect-WBlYwP5F.js";import{C as J}from"./CImage-DSmKCcJX.js";import{b as K}from"./index.esm-DBaUAKo-.js";import{C as q}from"./CAlert-F9qhzg3x.js";import"./CCloseButton-DW2grjsO.js";const oe=()=>{const[t,i]=c.useState({name:"",street:"",locality:"",city:"",state:"",country:"",zipCode:"",establishment:"",type:"",logo:null,registrationNumber:"",maintenanceAmount:"",maintenanceFrequency:"",dueDay:"",latePaymentPenalty:""}),[j,y]=c.useState(null),[D,p]=c.useState(!1),[g,C]=c.useState(null),[E,P]=c.useState([]),[L,f]=c.useState([]),[k,b]=c.useState([]),[h,A]=c.useState(""),[u,w]=c.useState(""),[V,R]=c.useState(""),[z,x]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const a=await H();a.code===200&&!a.error?P(a.results):console.error("Error fetching countries:",a.message)}catch(a){console.error("Error fetching countries:",a)}})()},[]),c.useEffect(()=>{(async()=>{if(h)try{const a=await O(h);a.code===200&&!a.error?f(a.results):console.error("Error fetching states:",a.message)}catch(a){console.error("Error fetching states:",a)}else f([])})()},[h]),c.useEffect(()=>{(async()=>{if(u)try{const a=await Q(u);a.code===200&&!a.error?b(a.results):console.error("Error fetching city:",a.message)}catch(a){console.error("Error fetching city:",a)}else b([])})()},[u]);const m=s=>{i({...t,[s.target.name]:s.target.value})},M=s=>{A(s.target.value),i({...t,[s.target.name]:s.target.value})},I=s=>{w(s.target.value),i({...t,[s.target.name]:s.target.value})},T=s=>{R(s.target.value),i({...t,[s.target.name]:s.target.value})},B=s=>{i({...t,[s.target.name]:s.target.value})},U=s=>{const a=s.target.files[0];i({...t,logo:a}),C(URL.createObjectURL(a))},N=s=>{const a=s.target.value;/^\d*$/.test(a)&&i({...t,[s.target.name]:a})},Z=async s=>{s.preventDefault(),x(!0),y(null),p(!1);try{const a=await $(t);a.code===200&&!a.error?(p(!0),i({name:"",street:"",locality:"",city:"",state:"",country:"",zipCode:"",establishment:"",type:"",logo:null,registrationNumber:"",maintenanceAmount:"",maintenanceFrequency:"",dueDay:"",latePaymentPenalty:""}),C(null),x(!1)):(console.log("error",a),y(a.errors),x(!1))}catch(a){console.log("error",a.response.data.errors),y(a.response.data.errors),x(!1)}};return e.jsx(l,{children:e.jsx(r,{xs:12,children:e.jsxs(G,{onSubmit:Z,children:[e.jsxs(S,{className:"mb-4",children:[e.jsx(F,{children:e.jsx("strong",{children:"Create Society"})}),e.jsxs(v,{children:[e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"name",className:"col-sm-2 col-form-label",children:["Society Name ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"text",id:"name",name:"name",placeholder:"Society Name",value:t.fname,onChange:m,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"street",className:"col-sm-2 col-form-label",children:["Address Line 1 ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"text",id:"street",name:"street",value:t.street,placeholder:"Address Line 1",onChange:m,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"locality",className:"col-sm-2 col-form-label",children:["Locality ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"text",id:"locality",name:"locality",value:t.locality,placeholder:"Locality",onChange:m,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"country",className:"col-sm-2 col-form-label",children:["Country ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsxs(d,{id:"country",name:"country",value:t.country,onChange:M,children:[e.jsx("option",{value:"",children:"Select Country"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"state",className:"col-sm-2 col-form-label",children:["State ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsxs(d,{id:"state",name:"state",value:t.state,onChange:I,disabled:!h,children:[e.jsx("option",{value:"",children:"Select State"}),L.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"city",className:"col-sm-2 col-form-label",children:["City ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsxs(d,{id:"city",name:"city",value:t.city,onChange:T,disabled:!u,children:[e.jsx("option",{value:"",children:"Select City"}),k.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"zipCode",className:"col-sm-2 col-form-label",children:["Zip code ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"tel",id:"zipCode",name:"zipCode",placeholder:"Zip Code",value:t.zipCode,onChange:m,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"establishment",className:"col-sm-2 col-form-label",children:"Establishment Date"}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"Date",id:"establishment",name:"establishment",placeholder:"Establishment Date",value:t.establishment,onChange:m})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"type",className:"col-sm-2 col-form-label",children:["Society Type ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsxs(d,{id:"type",name:"type",value:t.type,onChange:m,children:[e.jsx("option",{value:"",children:"Select Society Type"}),e.jsx("option",{value:"1",children:"Tenament"},"1"),e.jsx("option",{value:"2",children:"Flat"},"2")]})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"registrationNumber",className:"col-sm-2 col-form-label",children:"Registration Number"}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"text",id:"registrationNumber",name:"registrationNumber",placeholder:"Registration Number",value:t.registrationNumber,onChange:m})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"logo",className:"col-sm-2 col-form-label",children:"Logo"}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"file",id:"logo",name:"logo",onChange:U,accept:"image/*"})})]}),g&&e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{sm:2}),e.jsx(r,{sm:10,children:e.jsx(J,{src:g,alt:"Logo Preview",width:200,className:"mb-2"})})]})]})]}),e.jsxs(S,{className:"mt-4",children:[e.jsx(F,{children:"Maintenance Settings"}),e.jsxs(v,{children:[e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"maintenanceAmount",className:"col-sm-2 col-form-label",children:["Maintenance Amount",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"text",id:"maintenanceAmount",name:"maintenanceAmount",placeholder:"Enter maintenance amount",value:t.maintenanceAmount,onChange:N,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"maintenanceFrequency",className:"col-sm-2 col-form-label",children:["Maintenance Frequency ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsxs(d,{id:"maintenanceFrequency",name:"maintenanceFrequency",value:t.maintenanceFrequency,onChange:B,required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"annually",children:"Annually"})]})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsxs(n,{htmlFor:"dueDay",className:"col-sm-2 col-form-label",children:["Due Date ",e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"text",id:"dueDay",name:"dueDay",placeholder:"Due Days of the month like 1,2,3",value:t.dueDay,onChange:N,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"latePaymentPenalty",className:"col-sm-2 col-form-label",children:"Late Payment Penalty"}),e.jsx(r,{sm:10,children:e.jsx(o,{type:"number",id:"latePaymentPenalty",name:"latePaymentPenalty",placeholder:"Enter late payment penalty",value:t.latePaymentPenalty,onChange:m})})]}),e.jsx(K,{type:"submit",color:"primary",disabled:z,children:"Submit"})]})]}),j&&e.jsx(q,{color:"danger",className:"mt-3",children:j}),D&&e.jsx(q,{color:"success",className:"mt-3",children:"Society created successfully!"})]})})})};export{oe as default};
